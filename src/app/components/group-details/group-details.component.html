<div class="group-details-container" *ngIf="!loading">
  <div class="header">
    <p-button icon="pi pi-arrow-left" [rounded]="true" [text]="true" (onClick)="goBack()"></p-button>
    <h2>{{group?.groupName}}</h2>
  </div>

  <div class="content" *ngIf="group">
    <!-- Group Information -->
    <h3 class="section-title">Group Information</h3>
    <div class="info-grid">
      <div class="info-item">
        <strong>College:</strong> {{group.collegeName}}
      </div>
      <div class="info-item">
        <strong>Department:</strong> {{group.department}}
      </div>
      <div class="info-item">
        <strong>Academic Year:</strong> {{group.academicYear}}
      </div>
      <div class="info-item">
        <strong>Semester:</strong> {{group.semester}}
      </div>
      <div class="info-item">
        <strong>Total Students:</strong> {{group.totalStudents}}
      </div>
      <div class="info-item">
        <strong>Duration:</strong> {{group.durationMonths}} months
      </div>
      <div class="info-item">
        <strong>Mode:</strong> {{group.preferredMode}}
      </div>
      <div class="info-item">
        <strong>Type:</strong> {{group.internshipType}}
      </div>
    </div>
    
    <div class="status-section">
      <p-tag [value]="group.status" [severity]="getStatusSeverity(group.status)"></p-tag>
    </div>

    <!-- Faculty Coordinator -->
    <h3>Faculty Coordinator</h3>
    <div class="faculty-info">
      <div><strong>Name:</strong> {{group.facultyName}}</div>
      <div><strong>Email:</strong> {{group.facultyEmail}}</div>
      <div><strong>Phone:</strong> {{group.facultyPhone}}</div>
    </div>

    <!-- Invite Students -->
    <h3>Invite Students</h3>
    <div class="invite-form">
      <div class="p-fluid" style="flex: 1;">
        <input pInputText [(ngModel)]="inviteEmail" type="email" placeholder="student@college.edu" />
      </div>
      <p-button label="{{inviting ? 'Sending...' : 'Send Invitation'}}" 
                (onClick)="inviteStudent()" 
                [disabled]="!inviteEmail || inviting"></p-button>
    </div>

    <!-- Group Members -->
    <h3>Group Members ({{members.length}}/{{group.totalStudents}})</h3>
    <div *ngIf="members.length > 0" class="members-list">
      <div *ngFor="let member of members" class="member-card">
        <div class="member-avatar">
          <i class="pi pi-user"></i>
        </div>
        <div class="member-info">
          <div class="member-name">{{member.studentName}}</div>
          <div class="member-details">
            <span><i class="pi pi-envelope"></i> {{member.student?.email}}</span>
            <span *ngIf="member.student?.college"><i class="pi pi-building"></i> {{member.student?.college}}</span>
          </div>
          <div class="member-skills" *ngIf="member.githubLink">
            <i class="pi pi-github"></i> 
            <a [href]="member.githubLink" target="_blank">{{member.githubLink}}</a>
          </div>
        </div>
        <div class="member-status">
          <p-tag [value]="member.status" [severity]="getStatusSeverity(member.status)"></p-tag>
          <div class="member-role" *ngIf="group.leader?.id === member.student?.id">
            <small><i class="pi pi-star-fill"></i> Leader</small>
          </div>
        </div>
      </div>
    </div>
    
    <div *ngIf="members.length === 0" class="no-members">
      <i class="pi pi-users" style="font-size: 3rem;"></i>
      <p>No members yet. Start inviting students to join your group!</p>
    </div>
  </div>
</div>

<div *ngIf="loading" class="loading">
  <p-progressSpinner></p-progressSpinner>
  <p>Loading group details...</p>
</div>